= DESCRIPTION:

Installs RabbitMQ from ether the ubuntu/debian binary packages from rabbitmq.com or from source via Mercurial. If you use the Source / Mercural path (rabbitmq::edge) you can also install the rabbitmq-stomp adapter (rabbitmq::edge_stomp).

= REQUIREMENTS:

* erlang
* ubuntu
* mercurial

= ATTRIBUTES:

The following attributes only apply to the edge and edge_stomp recipes

== rabbitmq

* :version				The Mercurual Tag or Branch to use for rabbitmq

== rabbitmq[:stomp]

* :version				The Mercurual Tag or Branch to use for rabbitmq-stomp adapter

= USAGE:

== rabbitmq::default

This will load the latest released version of rabbitmq from the offical www.rabbitmq.com distrution site. It adds the site to the node's apt repository listings and then uses apt-get to install the current version of the rabbitmq "binary" distribution. This recipe does not load rabbitmq-stomp adapter and will not work with the rabbitmq::edge_stomp

It does not have any attributes and does not do any configuration beyond what the Debian/Ubuntu package does.

== rabbitmq::edge

This installs rabbitmq-server and rabbitmq-codegen from source using Mercurial into the  erlang lib directory. 

The value of rabbitmq[:version] is used as the tag/branch name for an "hg update" command after the source is cloned or updated.

Make is then run in the newly installed source directory to install it properly in the Erlang Environment.

An /etc/init.d/rabbitmq-server file is also installed on the node.

== rabbitmq::edge_stomp

This will include the rabbitmq::edge recipe and then install the rabbitmq-stomp adapter from source using Mercurial into the  erlang lib directory. 

The value of rabbitmq[:stomp][:version] is used as the tag/branch name for an "hg update" command after the source is cloned or updated. Then make is 

Make is then run in the newly installed source directory to install it properly in the Erlang Environment.

It also downloads the /etc/default/rabbitmq file which tells rabbitmq to load the rabbitmq-stomp adapter on startup.
